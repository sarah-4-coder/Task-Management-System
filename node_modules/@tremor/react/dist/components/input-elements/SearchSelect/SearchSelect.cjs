'use client';
"use strict";var e=require("tslib"),r=require("react"),t=require("../../../hooks/useInternalState.cjs"),a=require("@headlessui/react"),l=require("../../../assets/ArrowDownHeadIcon.cjs"),o=require("../../../assets/XCircleIcon.cjs"),n=require("../../../lib/tremorTwMerge.cjs"),d=require("../../../lib/utils.cjs"),s=require("../selectUtils.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=u(r);const m=d.makeClassName("SearchSelect"),i=d.makeClassName("SearchSelect"),f=c.default.forwardRef(((d,u)=>{const{defaultValue:f="",searchValue:b,onSearchValueChange:p,value:h,onValueChange:g,placeholder:w="Select...",disabled:k=!1,icon:x,enableClear:v=!0,name:N,required:y,error:C=!1,errorMessage:M,children:E,className:T,id:V}=d,q=e.__rest(d,["defaultValue","searchValue","onSearchValueChange","value","onValueChange","placeholder","disabled","icon","enableClear","name","required","error","errorMessage","children","className","id"]),S=r.useRef(null),[j,I]=t("",b),[F,D]=t(f,h),O=x,{reactElementChildren:z,valueToNameMapping:A}=r.useMemo((()=>{const e=c.default.Children.toArray(E).filter(r.isValidElement);return{reactElementChildren:e,valueToNameMapping:s.constructValueToNameMapping(e)}}),[E]),B=r.useMemo((()=>s.getFilteredOptions(null!=j?j:"",z)),[j,z]);return c.default.createElement("div",{className:n.tremorTwMerge("w-full min-w-[10rem] relative text-tremor-default")},c.default.createElement("select",{title:"search-select-hidden",required:y,className:n.tremorTwMerge("h-full w-full absolute left-0 top-0 z-0 opacity-0"),value:F,onChange:e=>{e.preventDefault()},name:N,disabled:k,id:V,onFocus:()=>{const e=S.current;e&&e.click()}},c.default.createElement("option",{className:"hidden",value:"",disabled:!0,hidden:!0},w),B.map((e=>{const r=e.props.value,t=e.props.children;return c.default.createElement("option",{className:"hidden",key:r,value:r},t)}))),c.default.createElement(a.Combobox,Object.assign({as:"div",ref:u,defaultValue:F,value:F,onChange:e=>{null==g||g(e),D(e)},disabled:k,className:n.tremorTwMerge("w-full min-w-[10rem] relative text-tremor-default",T),id:V},q),(({value:e})=>c.default.createElement(c.default.Fragment,null,c.default.createElement(a.Combobox.Button,{ref:S,className:"w-full"},O&&c.default.createElement("span",{className:n.tremorTwMerge("absolute inset-y-0 left-0 flex items-center ml-px pl-2.5")},c.default.createElement(O,{className:n.tremorTwMerge(m("Icon"),"flex-none h-5 w-5","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle")})),c.default.createElement(a.Combobox.Input,{className:n.tremorTwMerge("w-full outline-none text-left whitespace-nowrap truncate rounded-tremor-default focus:ring-2 transition duration-100 text-tremor-default pr-14 border py-2","border-tremor-border shadow-tremor-input focus:border-tremor-brand-subtle focus:ring-tremor-brand-muted","dark:border-dark-tremor-border dark:shadow-dark-tremor-input dark:focus:border-dark-tremor-brand-subtle dark:focus:ring-dark-tremor-brand-muted",O?"pl-10":"pl-3",k?"placeholder:text-tremor-content-subtle dark:placeholder:text-tremor-content-subtle":"placeholder:text-tremor-content dark:placeholder:text-tremor-content",s.getSelectButtonColors(s.hasValue(e),k)),placeholder:w,onChange:e=>{null==p||p(e.target.value),I(e.target.value)},displayValue:e=>{var r;return null!==(r=A.get(e))&&void 0!==r?r:""}}),c.default.createElement("div",{className:n.tremorTwMerge("absolute inset-y-0 right-0 flex items-center pr-2.5")},c.default.createElement(l,{className:n.tremorTwMerge(m("arrowDownIcon"),"flex-none h-5 w-5","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle")}))),v&&F?c.default.createElement("button",{type:"button",className:n.tremorTwMerge("absolute inset-y-0 right-0 flex items-center mr-8"),onClick:e=>{e.preventDefault(),D(""),I(""),null==g||g(""),null==p||p("")}},c.default.createElement(o,{className:n.tremorTwMerge(i("clearIcon"),"flex-none h-4 w-4","text-tremor-content-subtle","dark:text-dark-tremor-content-subtle")})):null,B.length>0&&c.default.createElement(a.Transition,{className:"absolute z-10 w-full",enter:"transition ease duration-100 transform",enterFrom:"opacity-0 -translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"transition ease duration-100 transform",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-4"},c.default.createElement(a.Combobox.Options,{className:n.tremorTwMerge("divide-y overflow-y-auto outline-none rounded-tremor-default text-tremor-default max-h-[228px] left-0 border my-1","bg-tremor-background border-tremor-border divide-tremor-border shadow-tremor-dropdown","dark:bg-dark-tremor-background dark:border-dark-tremor-border dark:divide-dark-tremor-border dark:shadow-dark-tremor-dropdown")},B))))),C&&M?c.default.createElement("p",{className:n.tremorTwMerge("errorMessage","text-sm text-rose-500 mt-1")},M):null)}));f.displayName="SearchSelect",module.exports=f;
