'use client';
"use strict";var e=require("tslib"),t=require("../../../lib/constants.cjs"),a=require("../../../lib/theme.cjs"),l=require("../../../lib/tremorTwMerge.cjs"),r=require("../../../lib/utils.cjs"),i=require("react"),o=require("recharts"),n=require("../common/ChartLegend.cjs"),s=require("../common/ChartTooltip.cjs"),c=require("../common/NoData.cjs"),d=require("../common/utils.cjs");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=u(i);const v=m.default.forwardRef(((u,v)=>{const{data:g=[],categories:h=[],index:f,colors:p=a.themeColorRange,valueFormatter:y=r.defaultValueFormatter,layout:k="horizontal",stack:b=!1,relative:x=!1,startEndOnly:w=!1,animationDuration:C=900,showAnimation:T=!1,showXAxis:E=!0,showYAxis:A=!0,yAxisWidth:j=56,intervalType:L="equidistantPreserveStart",showTooltip:q=!0,showLegend:O=!0,showGridLines:N=!0,autoMinValue:D=!1,minValue:G,maxValue:M,allowDecimals:S=!0,noDataText:V,onValueChange:F,enableLegendSlider:K=!1,customTooltip:X,rotateLabelX:B,barCategoryGap:P,tickGap:Y=5,className:z}=u,R=e.__rest(u,["data","categories","index","colors","valueFormatter","layout","stack","relative","startEndOnly","animationDuration","showAnimation","showXAxis","showYAxis","yAxisWidth","intervalType","showTooltip","showLegend","showGridLines","autoMinValue","minValue","maxValue","allowDecimals","noDataText","onValueChange","enableLegendSlider","customTooltip","rotateLabelX","barCategoryGap","tickGap","className"]),H=X,W=E||A?20:0,[_,I]=i.useState(60),$=d.constructCategoryColors(h,p),[J,Q]=m.default.useState(void 0),[U,Z]=i.useState(void 0),ee=!!F;function te(e,t,a){var l,r,i,o;a.stopPropagation(),F&&(d.deepEqual(J,Object.assign(Object.assign({},e.payload),{value:e.value}))?(Z(void 0),Q(void 0),null==F||F(null)):(Z(null===(r=null===(l=e.tooltipPayload)||void 0===l?void 0:l[0])||void 0===r?void 0:r.dataKey),Q(Object.assign(Object.assign({},e.payload),{value:e.value})),null==F||F(Object.assign({eventType:"bar",categoryClicked:null===(o=null===(i=e.tooltipPayload)||void 0===i?void 0:i[0])||void 0===o?void 0:o.dataKey},e.payload))))}const ae=d.getYAxisDomain(D,G,M);return m.default.createElement("div",Object.assign({ref:v,className:l.tremorTwMerge("w-full h-80",z)},R),m.default.createElement(o.ResponsiveContainer,{className:"h-full w-full"},(null==g?void 0:g.length)?m.default.createElement(o.BarChart,{barCategoryGap:P,data:g,stackOffset:b?"sign":x?"expand":"none",layout:"vertical"===k?"vertical":"horizontal",onClick:ee&&(U||J)?()=>{Q(void 0),Z(void 0),null==F||F(null)}:void 0},N?m.default.createElement(o.CartesianGrid,{className:l.tremorTwMerge("stroke-1","stroke-tremor-border","dark:stroke-dark-tremor-border"),horizontal:"vertical"!==k,vertical:"vertical"===k}):null,"vertical"!==k?m.default.createElement(o.XAxis,{padding:{left:W,right:W},hide:!E,dataKey:f,interval:w?"preserveStartEnd":L,tick:{transform:"translate(0, 6)"},ticks:w?[g[0][f],g[g.length-1][f]]:void 0,fill:"",stroke:"",className:l.tremorTwMerge("mt-4 text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,angle:null==B?void 0:B.angle,dy:null==B?void 0:B.verticalShift,height:null==B?void 0:B.xAxisHeight,minTickGap:Y}):m.default.createElement(o.XAxis,{hide:!E,type:"number",tick:{transform:"translate(-3, 0)"},domain:ae,fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickLine:!1,axisLine:!1,tickFormatter:y,minTickGap:Y,allowDecimals:S,angle:null==B?void 0:B.angle,dy:null==B?void 0:B.verticalShift,height:null==B?void 0:B.xAxisHeight}),"vertical"!==k?m.default.createElement(o.YAxis,{width:j,hide:!A,axisLine:!1,tickLine:!1,type:"number",domain:ae,tick:{transform:"translate(-3, 0)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content"),tickFormatter:x?e=>`${(100*e).toString()} %`:y,allowDecimals:S}):m.default.createElement(o.YAxis,{width:j,hide:!A,dataKey:f,axisLine:!1,tickLine:!1,ticks:w?[g[0][f],g[g.length-1][f]]:void 0,type:"category",interval:"preserveStartEnd",tick:{transform:"translate(0, 6)"},fill:"",stroke:"",className:l.tremorTwMerge("text-tremor-label","fill-tremor-content","dark:fill-dark-tremor-content")}),m.default.createElement(o.Tooltip,{wrapperStyle:{outline:"none"},isAnimationActive:!1,cursor:{fill:"#d1d5db",opacity:"0.15"},content:q?({active:e,payload:a,label:l})=>H?m.default.createElement(H,{payload:null==a?void 0:a.map((e=>{var a;return Object.assign(Object.assign({},e),{color:null!==(a=$.get(e.dataKey))&&void 0!==a?a:t.BaseColors.Gray})})),active:e,label:l}):m.default.createElement(s.default,{active:e,payload:a,label:l,valueFormatter:y,categoryColors:$}):m.default.createElement(m.default.Fragment,null),position:{y:0}}),O?m.default.createElement(o.Legend,{verticalAlign:"top",height:_,content:({payload:e})=>n({payload:e},$,I,U,ee?e=>{return t=e,void(ee&&(t!==U||J?(Z(t),null==F||F({eventType:"category",categoryClicked:t})):(Z(void 0),null==F||F(null)),Q(void 0)));var t}:void 0,K)}):null,h.map((e=>{var i;return m.default.createElement(o.Bar,{className:l.tremorTwMerge(r.getColorClassNames(null!==(i=$.get(e))&&void 0!==i?i:t.BaseColors.Gray,a.colorPalette.background).fillColor,F?"cursor-pointer":""),key:e,name:e,type:"linear",stackId:b||x?"a":void 0,dataKey:e,fill:"",isAnimationActive:T,animationDuration:C,shape:e=>((e,t,a,l)=>{const{fillOpacity:r,name:i,payload:o,value:n}=e;let{x:s,width:c,y:u,height:v}=e;return"horizontal"===l&&v<0?(u+=v,v=Math.abs(v)):"vertical"===l&&c<0&&(s+=c,c=Math.abs(c)),m.default.createElement("rect",{x:s,y:u,width:c,height:v,opacity:t||a&&a!==i?d.deepEqual(t,Object.assign(Object.assign({},o),{value:n}))?r:.3:r})})(e,J,U,k),onClick:te})}))):m.default.createElement(c,{noDataText:V})))}));v.displayName="BarChart",module.exports=v;
